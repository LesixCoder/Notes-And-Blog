# 计算机组成原理

- 概述
  - 发展史
    - 计算机发展的四个阶段
    - 微型计算机的发展历史
  - 分类
    - 超级计算机
    - 大型计算机
    - 迷你计算机(服务器)
    - 工作站
    - 微型计算机
  - 体系结构
    - 冯诺伊曼体系
    - 现代计算机的结构
  - 层次结构
    - 硬件逻辑层
    - 微程序机器层
    - 传统机器层
    - 操作系统层
    - 汇编语言层
    - 高级语言层
    - 应用层
  - 编码集
- 组成
  - 总线
  - 存储器
  - IO设备
  - CPU
  - 指令系统
- 计算
  - 进制转换
  - 定点数
  - 浮点数
  - 原码、补码、反码
  - 四则运算
- 综合实践
  - 双向链表
  - FIFO
  - LFU
  - LRU

## 1. 概述

### 1.1 计算机的发展史

#### 1.1.1 计算机发展的四个阶段

- 第一阶段: 电子管计算机(1946) - 埃尼阿克(ENIAC)
  - 集成度小，空间占用大
  - 功耗高，运行速度慢
  - 操作复杂，更换程序需要接线

  第二次世界大战是电子管计算机产生的催化剂(英国为了解密德国海军的密文)

- 第二阶段: 晶体管计算机(1957) - 来自MIT林肯实验室
  - 集成度相对较高，空间占用相对小
  - 功耗相对较低，运行速度较快
  - 操作相对简单，交互更加方便

  贝尔实验室的三个科学家发明了晶体管

- 第三阶段: 集成电路计算机(1964)
  - 计算机变得更小
  - 功耗变得更低
  - 计算速度变得更快

  德州仪器的工程师发明了集成电路(IC)，计算机具备进入千家万户的条件

- 第四阶段: 超大规模集成电路计算机(1980)
  - 一个芯片集成了上百万的晶体管
  - 速度更快，体积更小，价格更低，更能被大众接受
  - 用途丰富:文本处理、表格处理、高交互的游戏与应用

- 第五个阶段: 未来的计算机
  - 生物计算机: 以蛋白质分子作为主要原材料
    - 体积小，效率高
    - 不易损坏，生物级别的自动修复
    - 不受信号干扰，无热损耗
  - 量子计算机: 遵循量子力学的物理计算机
    - 2013年5月，谷歌和NASA发布D-Wave Two
    - 2017年5月，中国科学院宣布制造出光量子计算机
    - 2019年1月，IBM展示了世界首款商业化量子计算机

#### 1.1.2 微型计算机的发展历史

- 单核CPU:  集成电路的性能，每18-24个月就会提升一倍
  - (1971~1973)500KHz频率的微型计算机(字长8位)
  - (1973~1978)高于1MHz频率的微型计算机(字长8位)
  - (1978~1985)500MHz频率的微型计算机(字长16位)
  - (1985~2000)高于1GHz频率的微型计算机(字长32位)
  - (2000~现在)高于2GHz频率的微型计算机(字长为64位)

- 多核CPU
  - (2005) Intel奔腾系列双核CPU、AMD速龙系列
  - (2006)Intel酷睿四核CPU Intel酷睿系列十六核CPU
  - Intel至强系列五十六核CPU

### 1.2 计算机的分类

- 超级计算机
  - 功能最强、运算速度最快、存储容量最大的计算机
  - 多用于国家高科技领域和尖端技术研究
  - 标记他们运算速度的单位是`TFlop/s`，`1TFlop/s`=每秒一万亿次浮点计算

- 大型计算机
  - 又称大型机、大型主机、主机等
  - 具有高性能，可处理大量数据与复杂的运算
  - 在大型机市场领域，IBM占据着很大的份额

- 迷你计算机(服务器)
  - 也称为小型机，普通服务器
  - 不需要特殊的空调场所
  - 具备不错的算力，可以完成较复杂的运算

- 工作站
  - 高端的通用微型计算机，提供比个人计算机更强大的性能
  - 类似于普通台式电脑，体积较大，但性能强劲

- 微型计算机
  - 又称为个人计算机，是最普通的一类计算机
  - 从构成的本质上来讲，个人计算机与前面的分类无异

### 1.3 计算机的体系与结构

- 冯诺伊曼体系（现代计算机都是冯诺依曼机）
  - 特性：
    - 将程序指令和数据一起存储的计算机设计概念结构
    - 必须有一个存储器
    - 必须有一个控制器
    - 必须有一个运算器
    - 必须有输入设备
    - 必须有输出设备
  - 瓶颈
    - CPU和存储器速率之间的问题无法调和
    - CPU经常空转等待数据传输
- 现代计算机的结构
  - 现代计算机在冯诺依曼体系结构基础上进行修改
  - 解决CPU与存储设备之间的性能差异问题
  - 以存储器为核心

### 1.4  计算机的层次与编程语言

- 程序翻译与程序解释
  - 人类语言 -> 计算机语言， 需要进行语言之间的转换（较为高级的计算机语言L1，较为低级的L0）
  - 计算机执行的指令都是L0
  - 翻译过程（编译型）生成新的L0程序，解释过程（解释型）不生成新的L0程序
  - 解释过程由L0编写的解释器去解释L1程序

**编译型：**

较为高级的计算机语言L1（ L1进行程序逻辑描述） —生成(编译器)—> 较为低级的计算机语言L0（计算机实际执行的语言）

以java为例，执行过程是这样的 java程序 -编译-> JVM字节码（JVM虚拟机） -解释-> 机器码

**解释型：**

较为高级的计算机语言L1（ L1进行程序逻辑描述） —作为输入—> 使用L0语言实现另一个程序（解释器）—转换—> 较为低级的计算机语言L0

- 计算机的层次与编程语言

![](http://cdn-blog.liusixin.cn/FtYpYS9p3O0E7xLQet65HbPaQslP)

- 硬件逻辑层
  - 门、触发器等逻辑电路组成
  - 属于电子工程的领域
- 微程序机器层
  - 编程语言是微指令集
  - 微指令所组成的微程序直接交由硬件执行
- 传统机器层
  - 编程语言是CPU指令集(机器指令)
  - 编程语言和硬件是直接相关
  - 不同架构的CPU使用不同的CPU指令集
- 操作系统层
  - 向上提供了简易的操作界面
  - 向下对接了指令系统，管理硬件资源
  - 操作系统层是在软件和硬件之间的适配层
- 汇编语言层
  - 编程语言是汇编语言
  - 汇编语言可以翻译成可直接执行的机器语言
  - 完成翻译的过程的程序就是汇编器
- 高级语言层
  - 编程语言为广大程序员所接受的高级语言
  - 高级语言的类别非常多，由几百种
  - 常见的高级语言有:Python、Java、C/C++、Golang等
- 应用层
  - 满足计算机针对某种用途而专门设计

### 1.5 计算机的计算单位

- 容量单位
  - 在物理层面，高低电平记录信息
  - 理论上只认识0/1两种状态
  - 0/1能够表示的内容太少了，需要更大的容量表示方法
  - 0/1称为bit(比特位)
  - 字节:1Byte=8bits

|          |  bit   | Byte  |   KB   |    MB    |    GB     |   TB   |   PB   |    EB    |
| :------- | :----: | :---: | :----: | :------: | :-------: | :----: | :----: | :------: |
| 名字     | 比特位 | 字节  | 千字节 |  兆字节  |  吉字节   | 太字节 | 拍字节 |  艾字节  |
| 比例     |   -    | 8bits | 1024B  |  1024KB  |  1024MB   | 1024GB | 1024TB |  1024EB  |
| 常见设备 | 门电路 |   -   | 寄存器 | 高速缓存 | 内存/硬盘 |  硬盘  | 云硬盘 | 数据仓库 |

- 速度单位
  - 网络速度
    - 100M = 100M/s

为什么电信拉的100M光纤，测试峰值速度只有12M每秒?

```bash
# 网络常用单位为(Mbps)
100M/s = 100Mbps = 100Mbit/s
100Mbit/s = (100/8)MB/s = 12.5MB/s
```

- CPU频率
  - CPU的速度一般体现为CPU的时钟频率
  - CPU的时钟频率的单位一般是赫兹(Hz)
  - 主流CPU的时钟频率都在2GHz以上
  - Hz其实就是秒分之一，它是每秒中的周期性变动重复次数的计量
  - 并不是描述计算机领域所专有的单位
  - `2GHz = 2*1000^3Hz = 每秒20亿次`

### 1.6 计算机的字符与编码集

- 字符编码集的历史
  - ASCII码
    - 使用7个bits就可以完全表示ASCII码
    - 包含95个可打印字符
    - 33个不可打印字符(包括控制字符) `𝟑𝟑 + 𝟗𝟓 = 𝟏𝟐𝟖 = 𝟐^𝟕`
  - Extended ASCII码(第一次对ASCII码进行扩充，`7bits => 8bits`)
    - 常见数学运算符
    - 带音标的欧洲字符
    - 其他常用符、表格符等
  - 字符编码集的国际化
    - 欧洲、中亚、东亚、拉丁美洲国家的语言多样性
    - 语言体系不一样，不以有限字符组合的语言
    - 中国、韩国、日本等的语言最为复杂
- 中文编码集
  - 《信息交换用汉字编码字符集——基本集》
    - 一共收录了 7445 个字符
    - 包括 6763 个汉字和 682 个其它符号
  - 《汉字内码扩展规范》
    - 向下兼容GB2312，向上支持国际ISO标准
    - 收录了21003个汉字，支持全部中日韩汉字
  - Unicode:统一码、万国码、单一码
    - Unicode定义了世界通用的符号集，UTF-*实现了编码
    - UTF-8以字节为单位对Unicode进行编码

 Windows系统默认使用GBK编码，编程推荐使用UTF-8编码

## 2. 组成

- 计算机的总线与IO设备
  - 计算机的总线
  - 计算机的输入/输出设备
- 计算机的存储器
  - 计算机的存储器概览
    - 计算机的主存储器与辅助存储器
    - 计算机的高速存储器
- 计算机的CPU
  - 计算机的指令系统
  - 计算机的控制器
  - 计算机的运算器
  - 指令执行过程

### 2.1 计算机的总线

- 总线的概述
  - 提供了对外连接的接口
  - 不同设备可以通过USB接口进行连接
  - 连接的标准，促使外围设备接口的统一
  - 解决不同设备之间的通信问题
- 总线的分类
  - 片内总线
    - 芯片内部的总线
    - 寄存器与寄存器之间
    - 寄存器与控制器、运算器之间
  - 系统总线（ CPU、主内存、IO设备、各组件之间的信息传输线）
    - 数据总线
    - 地址总线
    - 控制总线
